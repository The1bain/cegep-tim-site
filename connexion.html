<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title data-i18n="page-title">Connexion â€“ Technique dâ€™intÃ©gration multimÃ©dia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      color: #e5e7eb;
      background: #020617;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .container {
      width: 100%;
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 1.25rem;
    }

    /* ---------- HEADER ---------- */
    .site-header {
      position: sticky;
      top: 0;
      z-index: 40;
      backdrop-filter: blur(10px);
      background: rgba(15, 23, 42, 0.96);
      color: #f9fafb;
    }

    .header-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem 1.25rem;
    }

    .logo {
      display: flex;
      flex-direction: column;
      font-size: 0.8rem;
      line-height: 1.1;
    }

    .logo-main {
      font-weight: 800;
      letter-spacing: 0.12em;
      font-size: 1.2rem;
    }

    .logo-sub {
      opacity: 0.75;
    }

    .main-nav {
      display: flex;
      gap: 1.1rem;
      font-size: 0.95rem;
      align-items: center;
    }

    .main-nav a {
      color: #e5e7eb;
      padding-bottom: 0.2rem;
      border-bottom: 2px solid transparent;
    }

    .main-nav a:hover {
      border-color: rgba(248, 250, 252, 0.6);
    }

    .main-nav a.active {
      border-color: #f97316;
      color: #ffffff;
      font-weight: 600;
    }

    .lang-btn {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      background: rgba(15, 23, 42, 0.8);
      color: #e5e7eb;
      padding: 0.25rem 0.8rem;
      font-size: 0.75rem;
      cursor: pointer;
      margin-left: 1rem;
    }

    @media (max-width: 768px) {
      .main-nav {
        display: none;
      }
    }

    /* ---------- BOUTONS ---------- */
    .btn-primary {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.6rem 1.15rem;
      border-radius: 999px;
      font-size: 0.9rem;
      font-weight: 600;
      border: none;
      cursor: pointer;
      background: linear-gradient(135deg, #f97316, #f59e0b);
      color: #111827;
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.5);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.65);
    }

    .text-link {
      color: #f97316;
      font-size: 0.85rem;
    }

    .text-link:hover {
      text-decoration: underline;
    }

    /* ---------- SECTION CONNEXION ---------- */
    .section {
      padding: 3rem 0 3.5rem;
      background: radial-gradient(circle at top, #0b1120 0, #020617 55%, #020617 100%);
    }

    .login-layout {
      max-width: 920px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1.2fr 1.1fr;
      gap: 2.2rem;
      align-items: flex-start;
    }

    @media (max-width: 800px) {
      .login-layout {
        grid-template-columns: 1fr;
      }
    }

    .login-intro h1 {
      font-size: clamp(2rem, 3.2vw, 2.4rem);
      margin-bottom: 0.6rem;
    }

    .login-intro p {
      color: #9ca3af;
      font-size: 0.95rem;
      max-width: 520px;
    }

    .mini-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.9rem;
      font-size: 0.78rem;
    }

    .mini-badge {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 0.1rem 0.6rem;
      color: #e5e7eb;
    }

    .login-card {
      border-radius: 18px;
      padding: 1.5rem 1.6rem;
      background: #020617;
      border: 1px solid rgba(148, 163, 184, 0.7);
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.9);
    }

    .login-card h2 {
      font-size: 1.2rem;
      margin-top: 0;
      margin-bottom: 0.5rem;
    }

    .login-card p {
      margin-top: 0;
      margin-bottom: 0.9rem;
      color: #9ca3af;
      font-size: 0.9rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
      margin-bottom: 0.8rem;
      font-size: 0.9rem;
    }

    .form-group label {
      font-weight: 500;
    }

    .form-group input,
    .form-group select {
      border-radius: 0.7rem;
      border: 1px solid rgba(148, 163, 184, 0.9);
      padding: 0.5rem 0.7rem;
      font-size: 0.9rem;
      outline: none;
      background: #020617;
      color: #e5e7eb;
    }

    .form-group input:focus,
    .form-group select:focus {
      border-color: #f97316;
      box-shadow: 0 0 0 1px rgba(249, 115, 22, 0.35);
    }

    .form-row-inline {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
    }

    @media (max-width: 640px) {
      .form-row-inline {
        grid-template-columns: 1fr;
      }
    }

    .form-check {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.85rem;
      margin-bottom: 0.8rem;
      color: #9ca3af;
    }

    .form-check input {
      width: 14px;
      height: 14px;
    }

    .login-success {
      margin-top: 0.6rem;
      font-size: 0.85rem;
      color: #4ade80;
      display: none;
    }

    .login-success.visible {
      display: block;
    }

    /* ---------- FOOTER ---------- */
    .site-footer {
      padding: 1.5rem 0;
      background: #000;
      color: #9ca3af;
      font-size: 0.85rem;
      text-align: center;
      border-top: 1px solid #111827;
    }

    /* ---------- CHATBOT ---------- */
    #chatbot {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      z-index: 50;
      font-size: 0.9rem;
    }

    #chatbot-toggle {
      width: 52px;
      height: 52px;
      border-radius: 50%;
      border: none;
      background: linear-gradient(135deg, #f97316, #f59e0b);
      color: #111827;
      font-weight: 800;
      cursor: pointer;
      box-shadow: 0 15px 35px rgba(15, 23, 42, 0.6);
    }

    #chatbot-window {
      position: absolute;
      bottom: 60px;
      right: 0;
      width: 280px;
      max-height: 420px;
      background: #ffffff;
      border-radius: 1rem;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.6);
      display: none;
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.8);
      flex-direction: column;
    }

    #chatbot-window.open {
      display: flex;
    }

    .chatbot-header {
      padding: 0.55rem 0.9rem;
      background: #111827;
      color: #f9fafb;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 0.85rem;
    }

    .chatbot-header span {
      font-weight: 600;
    }

    #chatbot-close {
      border: none;
      background: transparent;
      color: #e5e7eb;
      font-size: 1rem;
      cursor: pointer;
    }

    .chatbot-body {
      padding: 0.6rem 0.7rem 0.4rem;
      flex: 1;
      overflow-y: auto;
      background: #f3f4f6;
      font-size: 0.8rem;
    }

    .chatbot-msg {
      margin-bottom: 0.35rem;
      padding: 0.35rem 0.55rem;
      border-radius: 0.75rem;
      max-width: 80%;
      line-height: 1.35;
    }

    .chatbot-msg.bot {
      background: #ffffff;
      border: 1px solid rgba(148, 163, 184, 0.8);
      border-bottom-left-radius: 0.2rem;
    }

    .chatbot-msg.user {
      margin-left: auto;
      background: #111827;
      color: #f9fafb;
      border-bottom-right-radius: 0.2rem;
    }

    #chatbot-form {
      display: flex;
      border-top: 1px solid rgba(148, 163, 184, 0.8);
    }

    #chatbot-input {
      flex: 1;
      border: none;
      padding: 0.45rem 0.55rem;
      font-size: 0.8rem;
      outline: none;
    }

    #chatbot-input::placeholder {
      color: #9ca3af;
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="site-header">
    <div class="container header-inner">
      <div class="logo">
        <span class="logo-main">TIM</span>
        <span class="logo-sub" data-i18n="logo-sub">CÃ©gep de lâ€™Outaouais</span>
      </div>

      <nav class="main-nav">
        <a href="index.html" data-i18n="nav-home">Accueil</a>
        <a href="programme.html" data-i18n="nav-program">Programme</a>
        <a href="diplomes.html" data-i18n="nav-grads">DiplÃ´mÃ©s</a>
        <a href="faq.html" data-i18n="nav-faq">FAQ</a>
        <a href="contact.html" data-i18n="nav-contact">Nous joindre</a>
        <a href="connexion.html" id="nav-connexion-link" class="active" data-i18n="nav-login">
          Connexion
        </a>
      </nav>

      <button id="lang-toggle" class="lang-btn">FR / EN</button>
    </div>
  </header>

  <!-- SECTION CONNEXION -->
  <section class="section">
    <div class="container login-layout">
      <div class="login-intro">
        <h1 data-i18n="login-hero-title">Espace connexion TIM</h1>
        <p data-i18n="login-hero-text">
          Espace rÃ©servÃ© aux Ã©tudiants, futurs Ã©tudiants et partenaires pour
          accÃ©der Ã  des ressources supplÃ©mentaires du programme TIM.
        </p>
        <div class="mini-badges">
          <span class="mini-badge" data-i18n="login-badge-student">Ã‰tudiants TIM</span>
          <span class="mini-badge" data-i18n="login-badge-future">Futurs Ã©tudiants</span>
          <span class="mini-badge" data-i18n="login-badge-employer">Employeurs &amp; stages</span>
        </div>
      </div>

      <div class="login-card">
        <h2 data-i18n="login-form-title">Connexion</h2>
        <p data-i18n="login-form-text">
          Entre ton courriel et ton mot de passe pour accÃ©der Ã  ton espace TIM.
        </p>

        <form id="login-form">
          <div class="form-row-inline">
            <div class="form-group">
              <label for="login-email" data-i18n="login-label-email">Courriel</label>
              <input type="email" id="login-email" required />
            </div>

            <div class="form-group">
              <label for="login-role" data-i18n="login-label-role">Tu esâ€¦</label>
              <select id="login-role">
                <option value="" data-i18n="login-role-placeholder">Choisir une optionâ€¦</option>
                <option value="etudiant" data-i18n="login-role-student">Ã‰tudiant TIM</option>
                <option value="futur" data-i18n="login-role-future">Futur Ã©tudiant</option>
                <option value="employeur" data-i18n="login-role-employer">Employeur / milieu de stage</option>
                <option value="autre" data-i18n="login-role-other">Autre</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="login-password" data-i18n="login-label-password">Mot de passe</label>
            <input type="password" id="login-password" required />
          </div>

          <div class="form-check">
            <input type="checkbox" id="login-remember" />
            <label for="login-remember" data-i18n="login-remember">
              Rester connectÃ© sur cet appareil
            </label>
          </div>

          <button type="submit" class="btn-primary" data-i18n="login-submit">
            Se connecter
          </button>
          <button type="button"
                  id="logout-btn"
                  class="btn-primary"
                  style="margin-left:0.5rem; background:linear-gradient(135deg,#ef4444,#f97316);"
                  data-i18n="logout-btn">
            Se dÃ©connecter
          </button>

          <div id="login-success" class="login-success" data-i18n="login-success">
            âœ… Connexion rÃ©ussie.
          </div>
        </form>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="container">
      <p data-i18n="footer-text">
        Â© Technique dâ€™intÃ©gration multimÃ©dia â€“ CÃ©gep de lâ€™Outaouais
      </p>
    </div>
  </footer>

  <!-- CHATBOT -->
  <div id="chatbot">
    <button id="chatbot-toggle">ðŸ’¬</button>
    <div id="chatbot-window">
      <div class="chatbot-header">
        <span data-i18n="chatbot-title">Assistant TIM</span>
        <button id="chatbot-close">Ã—</button>
      </div>
      <div class="chatbot-body" id="chatbot-body">
        <div class="chatbot-msg bot">
          <span data-i18n="chatbot-welcome">
            Salut ! Pose-moi une question sur TIM ou la connexion ðŸ˜„
          </span>
        </div>
      </div>
      <form id="chatbot-form">
        <input
          type="text"
          id="chatbot-input"
          placeholder="Ã‰cris ton messageâ€¦"
          autocomplete="off"
          data-i18n-placeholder="chatbot-placeholder"
        />
      </form>
    </div>
  </div>

  <!-- JS : auth, langue, formulaire, chatbot -->
  <script>
    // =========================
    // 0. AUTH PARTAGÃ‰E
    // =========================
    const AUTH_KEY = "timAuth";

    function saveAuth(email, role, roleLabel) {
      const data = { email, role, roleLabel };
      try {
        localStorage.setItem(AUTH_KEY, JSON.stringify(data));
      } catch (e) {}
    }

    function loadAuth() {
      try {
        const raw = localStorage.getItem(AUTH_KEY);
        if (!raw) return null;
        return JSON.parse(raw);
      } catch (e) {
        return null;
      }
    }

    function clearAuth() {
      try {
        localStorage.removeItem(AUTH_KEY);
      } catch (e) {}
    }

    function applyAuthToHeader() {
      const auth = loadAuth();
      const navLink = document.getElementById("nav-connexion-link");
      const logoEl = document.querySelector(".logo");
      if (!navLink) return;

      const lang = document.documentElement.lang || "fr";

      if (auth) {
        navLink.textContent = lang === "en" ? "My TIM space" : "Mon espace TIM";
        navLink.href = "connexion.html";

        if (logoEl) {
          let badge = logoEl.querySelector(".auth-badge");
          if (!badge) {
            badge = document.createElement("div");
            badge.className = "auth-badge";
            badge.style.fontSize = "0.7rem";
            badge.style.marginTop = "0.15rem";
            badge.style.color = "#fbbf24";
            logoEl.appendChild(badge);
          }
          const label =
            auth.roleLabel ||
            auth.role ||
            auth.email ||
            (lang === "en" ? "Connected" : "ConnectÃ©");
          badge.textContent =
            (lang === "en" ? "Signed in as: " : "ConnectÃ© comme : ") +
            label;
        }
      } else {
        navLink.textContent = lang === "en" ? "Login" : "Connexion";
        navLink.href = "connexion.html";
        const badge = document.querySelector(".logo .auth-badge");
        if (badge) badge.remove();
      }
    }

    // =========================
    // 1. TRADUCTIONS
    // =========================
    const translations = {
      fr: {
        "page-title": "Connexion â€“ Technique dâ€™intÃ©gration multimÃ©dia",
        "logo-sub": "CÃ©gep de lâ€™Outaouais",

        "nav-home": "Accueil",
        "nav-program": "Programme",
        "nav-grads": "DiplÃ´mÃ©s",
        "nav-faq": "FAQ",
        "nav-contact": "Nous joindre",
        "nav-login": "Connexion",

        "login-hero-title": "Espace connexion TIM",
        "login-hero-text":
          "Espace rÃ©servÃ© aux Ã©tudiants, futurs Ã©tudiants et partenaires pour accÃ©der Ã  des ressources supplÃ©mentaires du programme TIM.",

        "login-badge-student": "Ã‰tudiants TIM",
        "login-badge-future": "Futurs Ã©tudiants",
        "login-badge-employer": "Employeurs & stages",

        "login-form-title": "Connexion",
        "login-form-text":
          "Entre ton courriel et ton mot de passe pour accÃ©der Ã  ton espace TIM.",

        "login-label-email": "Courriel",
        "login-label-role": "Tu esâ€¦",
        "login-role-placeholder": "Choisir une optionâ€¦",
        "login-role-student": "Ã‰tudiant TIM",
        "login-role-future": "Futur Ã©tudiant",
        "login-role-employer": "Employeur / milieu de stage",
        "login-role-other": "Autre",
        "login-label-password": "Mot de passe",
        "login-remember": "Rester connectÃ© sur cet appareil",
        "login-submit": "Se connecter",
        "logout-btn": "Se dÃ©connecter",
        "login-success": "âœ… Connexion rÃ©ussie.",

        "footer-text":
          "Â© Technique dâ€™intÃ©gration multimÃ©dia â€“ CÃ©gep de lâ€™Outaouais",

        "chatbot-title": "Assistant TIM",
        "chatbot-welcome":
          "Salut ! Pose-moi une question sur TIM ou la connexion ðŸ˜„",
        "chatbot-placeholder": "Ã‰cris ton messageâ€¦",
        "chatbot-answer":
          "Un vrai systÃ¨me de connexion sÃ©curisÃ©e permettrait de personnaliser ton espace TIM avec tes informations et tes ressources."
      },
      en: {
        "page-title": "Login â€“ Multimedia Integration Technology",
        "logo-sub": "CÃ©gep de lâ€™Outaouais",

        "nav-home": "Home",
        "nav-program": "Program",
        "nav-grads": "Graduates",
        "nav-faq": "FAQ",
        "nav-contact": "Contact us",
        "nav-login": "Login",

        "login-hero-title": "TIM login space",
        "login-hero-text":
          "A dedicated space for current students, future students and partners to access extra TIM resources.",

        "login-badge-student": "TIM students",
        "login-badge-future": "Future students",
        "login-badge-employer": "Employers & internships",

        "login-form-title": "Login",
        "login-form-text":
          "Enter your email and password to access your TIM space.",

        "login-label-email": "Email",
        "login-label-role": "You areâ€¦",
        "login-role-placeholder": "Choose an optionâ€¦",
        "login-role-student": "TIM student",
        "login-role-future": "Future student",
        "login-role-employer": "Employer / internship provider",
        "login-role-other": "Other",
        "login-label-password": "Password",
        "login-remember": "Stay signed in on this device",
        "login-submit": "Sign in",
        "logout-btn": "Sign out",
        "login-success": "âœ… Login successful.",

        "footer-text":
          "Â© Multimedia Integration Technology â€“ CÃ©gep de lâ€™Outaouais",

        "chatbot-title": "TIM Assistant",
        "chatbot-welcome":
          "Hi! Ask me a question about TIM or the login page ðŸ˜„",
        "chatbot-placeholder": "Type your messageâ€¦",
        "chatbot-answer":
          "A real secure login system would let you access a personalized TIM space with your information and resources."
      }
    };

    let currentLang = "fr";

    function applyTranslations() {
      const elements = document.querySelectorAll("[data-i18n]");
      elements.forEach(el => {
        const key = el.getAttribute("data-i18n");
        const text = translations[currentLang][key];
        if (text !== undefined) {
          el.innerHTML = text;
        }
      });

      const placeholderEls = document.querySelectorAll("[data-i18n-placeholder]");
      placeholderEls.forEach(el => {
        const key = el.getAttribute("data-i18n-placeholder");
        const text = translations[currentLang][key];
        if (text !== undefined) {
          el.setAttribute("placeholder", text);
        }
      });

      const titleEl = document.querySelector("title[data-i18n='page-title']");
      if (titleEl) {
        titleEl.innerHTML = translations[currentLang]["page-title"];
      }

      document.documentElement.lang = currentLang;

      applyAuthToHeader();
    }

    const langBtn = document.getElementById("lang-toggle");
    if (langBtn) {
      langBtn.addEventListener("click", () => {
        currentLang = currentLang === "fr" ? "en" : "fr";
        langBtn.textContent = currentLang === "fr" ? "FR / EN" : "EN / FR";
        applyTranslations();
      });
    }

    // =========================
    // 2. CONNEXION
    // =========================
    const loginForm = document.getElementById("login-form");
    const loginSuccess = document.getElementById("login-success");
    const logoutBtn = document.getElementById("logout-btn");

    if (loginForm) {
      loginForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const emailEl = document.getElementById("login-email");
        const roleEl = document.getElementById("login-role");
        const email = emailEl.value.trim();
        const role = roleEl.value;
        const roleLabel =
          roleEl.options[roleEl.selectedIndex]?.textContent || "";

        if (!email) return;

        saveAuth(email, role, roleLabel);

        if (loginSuccess) {
          loginSuccess.classList.add("visible");
        }
        applyAuthToHeader();
      });
    }

    if (logoutBtn) {
      logoutBtn.addEventListener("click", () => {
        clearAuth();
        if (loginSuccess) {
          loginSuccess.classList.remove("visible");
        }
        applyAuthToHeader();
      });
    }

    // =========================
    // 3. CHATBOT
    // =========================
    const chatbotToggle = document.getElementById("chatbot-toggle");
    const chatbotWindow = document.getElementById("chatbot-window");
    const chatbotClose = document.getElementById("chatbot-close");
    const chatbotForm = document.getElementById("chatbot-form");
    const chatbotInput = document.getElementById("chatbot-input");
    const chatbotBody = document.getElementById("chatbot-body");

    function toggleChatbot(open) {
      if (!chatbotWindow) return;
      if (open === undefined) {
        chatbotWindow.classList.toggle("open");
      } else if (open) {
        chatbotWindow.classList.add("open");
      } else {
        chatbotWindow.classList.remove("open");
      }
    }

    if (chatbotToggle) {
      chatbotToggle.addEventListener("click", () => toggleChatbot());
    }
    if (chatbotClose) {
      chatbotClose.addEventListener("click", () => toggleChatbot(false));
    }

    function addChatMessage(text, from = "bot") {
      if (!chatbotBody) return;
      const msg = document.createElement("div");
      msg.className = "chatbot-msg " + from;
      msg.textContent = text;
      chatbotBody.appendChild(msg);
      chatbotBody.scrollTop = chatbotBody.scrollHeight;
    }

    if (chatbotForm) {
      chatbotForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const text = chatbotInput.value.trim();
        if (!text) return;

        addChatMessage(text, "user");
        chatbotInput.value = "";

        setTimeout(() => {
          addChatMessage(
            translations[currentLang]["chatbot-answer"],
            "bot"
          );
        }, 400);
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      applyTranslations();
    });
  </script>
</body>
</html>
